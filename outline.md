# 诗意项目管理应用 - 项目架构文档

## 项目概述

### 应用名称
**"静水流深"** - 诗意项目管理系统

### 技术栈
- **前端框架**: 原生HTML5 + CSS3 + JavaScript ES6+
- **样式框架**: Tailwind CSS
- **动画库**: Anime.js
- **图表库**: ECharts.js
- **数据存储**: localStorage + IndexedDB
- **构建工具**: 无需构建，纯静态应用

### 项目结构
```
/mnt/okcomputer/output/
├── index.html              # 主页面 - 项目管理
├── focus.html              # 专注模式页面
├── statistics.html         # 统计分析页面
├── settings.html           # 设置页面
├── main.js                 # 主要JavaScript逻辑
├── resources/              # 资源文件夹
│   ├── zen-bg.jpg         # 禅意背景图
│   ├── flowing-water.jpg  # 流水背景图
│   └── night-sky.jpg      # 夜空背景图
├── interaction.md          # 交互设计文档
├── design.md              # 设计风格文档
└── outline.md             # 项目架构文档
```

## 页面架构

### 1. 主页面 (index.html)
**功能**: 项目管理核心界面

#### 布局结构
- **顶部导航栏**: 应用Logo + 主要功能导航
- **左侧边栏**: 项目筛选器 + 快速操作
- **主内容区**: 
  - 上半部分：今日项目概览 + 快速添加
  - 下半部分：项目列表（卡片式布局）
- **右侧信息栏**: 今日统计 + 即将到期提醒
- **底部工具栏**: 主题切换 + 数据操作

#### 核心功能
- 项目CRUD操作
- 项目筛选和搜索
- 快速开始专注
- 实时数据更新

### 2. 专注模式页面 (focus.html)
**功能**: 沉浸式专注计时器

#### 布局结构
- **全屏背景**: 动态自然景色
- **中央计时器**: 大型圆形计时显示
- **项目信息**: 当前专注项目名称
- **控制面板**: 开始/暂停/停止/切换按钮
- **背景音效**: 可选的自然音效

#### 核心功能
- 多种计时模式（番茄钟、自定义）
- 专注状态管理
- 自动时间记录
- 专注中断处理

### 3. 统计分析页面 (statistics.html)
**功能**: 数据可视化和分析

#### 布局结构
- **概览仪表板**: 关键指标卡片
- **时间趋势图**: 专注时间变化趋势
- **项目分析**: 各项目专注时间分布
- **分类统计**: 按类别的数据分析
- **历史记录**: 详细的专注记录列表

#### 核心功能
- 多维度数据展示
- 时间范围筛选
- 数据导出功能
- 成就系统展示

### 4. 设置页面 (settings.html)
**功能**: 应用配置和数据管理

#### 布局结构
- **主题设置**: 亮色/暗色主题切换
- **通知设置**: 提醒和通知配置
- **数据管理**: 导入/导出/清空数据
- **关于信息**: 应用版本和说明
- **高级设置**: 自定义配置选项

#### 核心功能
- 主题切换
- 数据备份恢复
- 个性化配置
- 系统信息查看

## 数据架构

### 数据模型

#### 项目数据模型
```javascript
{
  id: "unique-id",
  name: "项目名称",
  description: "项目描述",
  category: "工作|学习|生活|创意",
  priority: "高|中|低",
  status: "待开始|进行中|已完成|已暂停",
  tags: ["标签1", "标签2"],
  createdAt: "2025-01-01T00:00:00Z",
  updatedAt: "2025-01-01T00:00:00Z",
  dueDate: "2025-01-31T00:00:00Z",
  completedAt: null,
  totalFocusTime: 0, // 总专注时间（秒）
  focusSessions: [] // 专注记录ID数组
}
```

#### 专注记录模型
```javascript
{
  id: "session-id",
  projectId: "project-id",
  startTime: "2025-01-01T09:00:00Z",
  endTime: "2025-01-01T09:25:00Z",
  duration: 1500, // 实际专注时长（秒）
  plannedDuration: 1800, // 计划专注时长（秒）
  status: "已完成|中断|暂停",
  notes: "专注笔记",
  type: "番茄钟|自由专注"
}
```

#### 用户设置模型
```javascript
{
  theme: "light|dark|auto",
  notifications: {
    enabled: true,
    sound: true,
    desktop: true
  },
  focusSettings: {
    defaultDuration: 1500, // 默认专注时长（秒）
    breakDuration: 300, // 休息时长（秒）
    autoStartBreak: true
  },
  statistics: {
    dailyGoal: 7200, // 每日目标（秒）
    weeklyGoal: 25200 // 每周目标（秒）
  }
}
```

### 存储策略

#### localStorage使用
- **用户设置**: 主题、通知、个人偏好
- **应用状态**: 当前页面、筛选条件、临时数据
- **缓存数据**: 统计数据缓存、搜索结果缓存

#### IndexedDB使用
- **项目数据**: 所有项目信息
- **专注记录**: 历史专注数据
- **统计数据**: 预计算的统计结果

#### 数据备份
- **JSON导出**: 完整数据导出功能
- **自动备份**: 定期本地备份
- **版本控制**: 数据结构版本管理

## 功能模块

### 项目管理模块
- **项目服务**: 项目的CRUD操作
- **筛选服务**: 多维度项目筛选
- **搜索服务**: 全文搜索功能
- **标签服务**: 标签管理

### 专注计时模块
- **计时器服务**: 计时器核心逻辑
- **状态管理**: 专注状态切换
- **通知服务**: 专注提醒和通知
- **数据记录**: 专注数据持久化

### 统计分析模块
- **统计计算**: 多维度数据统计
- **图表服务**: 数据可视化
- **趋势分析**: 时间序列分析
- **成就系统**: 成就计算和解锁

### 主题系统模块
- **主题切换**: 动态主题切换
- **样式管理**: CSS变量管理
- **响应式**: 自适应布局
- **动画效果**: 主题切换动画

## 技术实现

### 前端架构
- **模块化**: ES6模块系统
- **组件化**: 可复用UI组件
- **事件驱动**: 自定义事件系统
- **状态管理**: 简单的状态管理模式

### 性能优化
- **懒加载**: 图片和组件懒加载
- **缓存策略**: 数据缓存和更新
- **防抖节流**: 高频操作优化
- **代码分割**: 按页面分割代码

### 兼容性
- **浏览器支持**: 现代浏览器兼容
- **渐进增强**: 基础功能优先
- **优雅降级**: 高级功能降级处理
- **移动适配**: 响应式设计

## 部署方案

### 静态部署
- **文件结构**: 纯静态文件
- **CDN加速**: 资源文件CDN
- **缓存策略**: 合理的缓存配置
- **HTTPS**: 安全传输

### 数据持久化
- **本地存储**: 用户数据本地保存
- **导出功能**: 数据备份和迁移
- **隐私保护**: 数据不上传服务器
- **离线支持**: PWA特性支持

## 开发计划

### 第一阶段：核心功能
1. 基础页面结构和导航
2. 项目管理功能
3. 专注计时器功能
4. 基础数据统计

### 第二阶段：完善功能
1. 高级统计和可视化
2. 主题切换系统
3. 数据导入导出
4. 设置和配置

### 第三阶段：优化体验
1. 动画效果和交互优化
2. 性能优化和错误处理
3. 移动端适配
4. 用户反馈和迭代